import{aF as Z,A as f,B as ee,U as te,k as y,R as ae,S as se,aK as le,r,o as _,l as h,w as t,f as s,h as d,q as F,aa as D,u as l,m as g,i as B,t as m,j as P,O as ne,x as j}from"./vendor.c29fa1eb.js";import{u as oe}from"./users.563d9224.js";import{u as re,i as ue,e as ie}from"./main.02f9c92c.js";import{_ as ce}from"./AstronautIcon.9a29c60e.js";import{_ as de}from"./UserIndexDropdown.671f8071.js";const me={class:"flex items-center justify-end space-x-5"},pe={class:"relative table-container"},fe={class:"relative flex items-center justify-end h-5 border-gray-200 border-solid"},_e={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},he={class:"absolute z-10 items-center left-6 top-2.5 select-none"},Be={class:"custom-control custom-checkbox"},Ce={setup(be){re();const z=ue(),u=oe(),k=ie();Z();let b=f(!1),U=f(!0);f(null),f("created_at"),f(!1);const{t:p}=ee();let c=f(null),o=te({name:"",email:"",phone:""});const M=y(()=>[{key:"status",thClass:"extra",tdClass:"font-medium text-gray-900",sortable:!1},{key:"name",label:p("users.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"email",label:"Email"},{key:"phone",label:p("users.phone")},{key:"created_at",label:p("users.added_on")},{key:"actions",tdClass:"text-right text-sm font-medium",sortable:!1}]),A=y(()=>!u.totalUsers&&!U.value),C=y({get:()=>u.selectedUsers,set:a=>u.selectUser(a)}),I=y({get:()=>u.selectAllField,set:a=>u.setSelectAllState(a)});ae(o,()=>{R()},{deep:!0}),se(()=>{u.fetchUsers()}),le(()=>{u.selectAllField&&u.selectAllUsers()});function R(){N()}function N(){c.value&&c.value.refresh()}async function G({page:a,filter:n,sort:v}){let $={display_name:o.name!==null?o.name:"",phone:o.phone!==null?o.phone:"",email:o.email!==null?o.email:"",orderByField:v.fieldName||"created_at",orderBy:v.order||"desc",page:a};U.value=!0;let i=await u.fetchUsers($);return U.value=!1,{data:i.data.data,pagination:{totalPages:i.data.meta.last_page,currentPage:a,totalCount:i.data.meta.total,limit:10}}}function T(){o.name="",o.email="",o.phone=null}function H(){b.value&&T(),b.value=!b.value}function L(){z.openDialog({title:p("general.are_you_sure"),message:p("users.confirm_delete",2),yesLabel:p("general.ok"),noLabel:p("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(a=>{a&&u.deleteMultipleUsers().then(n=>{n.data.success&&c.value&&c.value.refresh()})})}return(a,n)=>{const v=r("BaseBreadcrumbItem"),$=r("BaseBreadcrumb"),i=r("BaseIcon"),V=r("BaseButton"),W=r("BasePageHeader"),w=r("BaseInput"),S=r("BaseInputGroup"),q=r("BaseFilterWrapper"),K=r("BaseEmptyPlaceholder"),O=r("BaseDropdownItem"),X=r("BaseDropdown"),E=r("BaseCheckbox"),J=r("router-link"),Q=r("BaseTable"),Y=r("BasePage");return _(),h(Y,null,{default:t(()=>[s(W,{title:a.$t("users.title")},{actions:t(()=>[d("div",me,[F(s(V,{variant:"primary-outline",onClick:H},{right:t(e=>[l(b)?(_(),h(i,{key:1,name:"XIcon",class:g(e.class)},null,8,["class"])):(_(),h(i,{key:0,name:"FilterIcon",class:g(e.class)},null,8,["class"]))]),default:t(()=>[B(m(a.$t("general.filter"))+" ",1)]),_:1},512),[[D,l(u).totalUsers]]),l(k).currentUser.is_owner?(_(),h(V,{key:0,onClick:n[0]||(n[0]=e=>a.$router.push("users/create"))},{left:t(e=>[s(i,{name:"PlusIcon",class:g(e.class),"aria-hidden":"true"},null,8,["class"])]),default:t(()=>[B(" "+m(a.$t("users.add_user")),1)]),_:1})):P("",!0)])]),default:t(()=>[s($,null,{default:t(()=>[s(v,{title:a.$t("general.home"),to:"dashboard"},null,8,["title"]),s(v,{title:a.$tc("users.title",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),s(q,{show:l(b),class:"mt-3",onClear:T},{default:t(()=>[s(S,{label:a.$tc("users.name"),class:"flex-1 mt-2 mr-4"},{default:t(()=>[s(w,{modelValue:l(o).name,"onUpdate:modelValue":n[1]||(n[1]=e=>l(o).name=e),type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),s(S,{label:a.$tc("users.email"),class:"flex-1 mt-2 mr-4"},{default:t(()=>[s(w,{modelValue:l(o).email,"onUpdate:modelValue":n[2]||(n[2]=e=>l(o).email=e),type:"text",name:"email",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),s(S,{class:"flex-1 mt-2",label:a.$tc("users.phone")},{default:t(()=>[s(w,{modelValue:l(o).phone,"onUpdate:modelValue":n[3]||(n[3]=e=>l(o).phone=e),type:"text",name:"phone",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["show"]),F(s(K,{title:a.$t("users.no_users"),description:a.$t("users.list_of_users")},{actions:t(()=>[l(k).currentUser.is_owner?(_(),h(V,{key:0,variant:"primary-outline",onClick:n[4]||(n[4]=e=>a.$router.push("/admin/users/create"))},{left:t(e=>[s(i,{name:"PlusIcon",class:g(e.class)},null,8,["class"])]),default:t(()=>[B(" "+m(a.$t("users.add_user")),1)]),_:1})):P("",!0)]),default:t(()=>[s(ce,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[D,l(A)]]),F(d("div",pe,[d("div",fe,[l(u).selectedUsers.length?(_(),h(X,{key:0},{activator:t(()=>[d("span",_e,[B(m(a.$t("general.actions"))+" ",1),s(i,{name:"ChevronDownIcon",class:"h-5"})])]),default:t(()=>[s(O,{onClick:L},{default:t(()=>[s(i,{name:"TrashIcon",class:"h-5 mr-3 text-gray-600"}),B(" "+m(a.$t("general.delete")),1)]),_:1})]),_:1})):P("",!0)]),s(Q,{ref:(e,x)=>{x.table=e,j(c)?c.value=e:c=e},data:G,columns:l(M),class:"mt-3"},ne({header:t(()=>[d("div",he,[s(E,{modelValue:l(I),"onUpdate:modelValue":n[5]||(n[5]=e=>j(I)?I.value=e:null),variant:"primary",onChange:l(u).selectAllUsers},null,8,["modelValue","onChange"])])]),"cell-status":t(({row:e})=>[d("div",Be,[s(E,{id:e.data.id,modelValue:l(C),"onUpdate:modelValue":n[6]||(n[6]=x=>j(C)?C.value=x:null),value:e.data.id,variant:"primary"},null,8,["id","modelValue","value"])])]),"cell-name":t(({row:e})=>[s(J,{to:{path:`users/${e.data.id}/edit`},class:"font-medium text-primary-500"},{default:t(()=>[B(m(e.data.name),1)]),_:2},1032,["to"])]),"cell-phone":t(({row:e})=>[d("span",null,m(e.data.phone?e.data.phone:"-"),1)]),"cell-created_at":t(({row:e})=>[d("span",null,m(e.data.formatted_created_at),1)]),_:2},[(l(k).currentUser.is_owner,{name:"cell-actions",fn:t(({row:e})=>[s(de,{row:e.data,table:l(c),"load-data":N},null,8,["row","table"])])})]),1032,["columns"])],512),[[D,!l(A)]])]),_:1})}}};export{Ce as default};
