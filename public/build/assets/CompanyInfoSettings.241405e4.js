var se=Object.defineProperty;var R=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var T=(_,o,i)=>o in _?se(_,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):_[o]=i,E=(_,o)=>{for(var i in o||(o={}))oe.call(o,i)&&T(_,i,o[i]);if(R)for(var i of R(o))ne.call(o,i)&&T(_,i,o[i]);return _};import{aF as le,B as J,A as C,U as O,k,D as h,E as x,I as ie,M as H,r as u,o as w,l as q,w as d,h as m,t as b,u as e,f as s,i as G,m as K,j,N as P,ab as de,G as re,e as Q,x as ue,F as me}from"./vendor.c29fa1eb.js";import{b as W,c as X,d as Y}from"./main.02f9c92c.js";const ce={class:"flex justify-between w-full"},pe={class:"px-6 pt-6"},fe={class:"font-medium text-lg text-left"},_e={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},ge=["onSubmit"],ye={class:"p-4 sm:p-6 space-y-4"},ve={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},be={setup(_){const o=W(),i=X(),I=Y(),B=le(),{t:S}=J();let c=C(!1);const a=O({id:o.selectedCompany.id,name:null}),$=k(()=>i.active&&i.componentName==="DeleteCompanyModal"),y={formData:{name:{required:h.withMessage(S("validation.required"),x),sameAsName:h.withMessage(S("validation.company_name_not_same"),ie(o.selectedCompany.name))}}},f=H(y,{formData:a},{$scope:!1});async function V(){if(f.value.$touch(),f.value.$invalid)return!0;const v=o.companies[0];c.value=!0;try{const g=await o.deleteCompany(a);console.log(g.data.success),g.data.success&&(p(),await o.setSelectedCompany(v),B.push("/admin/dashboard"),await I.setIsAppLoaded(!1),await I.bootstrap()),c.value=!1}catch{c.value=!1}}function U(){a.id=null,a.name="",f.value.$reset()}function p(){i.closeModal(),setTimeout(()=>{U(),f.value.$reset()},300)}return(v,g)=>{const F=u("BaseInput"),N=u("BaseInputGroup"),l=u("BaseButton"),t=u("BaseIcon"),D=u("BaseModal");return w(),q(D,{show:e($),onClose:p},{default:d(()=>[m("div",ce,[m("div",pe,[m("h6",fe,b(e(i).title),1),m("p",_e,b(v.$t("settings.company_info.delete_company_modal_desc",{company:e(o).selectedCompany.name})),1)])]),m("form",{action:"",onSubmit:P(V,["prevent"])},[m("div",ye,[s(N,{label:v.$t("settings.company_info.delete_company_modal_label",{company:e(o).selectedCompany.name}),error:e(f).formData.name.$error&&e(f).formData.name.$errors[0].$message,required:""},{default:d(()=>[s(F,{modelValue:e(a).name,"onUpdate:modelValue":g[0]||(g[0]=r=>e(a).name=r),invalid:e(f).formData.name.$error,onInput:g[1]||(g[1]=r=>e(f).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),m("div",ve,[s(l,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:p},{default:d(()=>[G(b(v.$t("general.cancel")),1)]),_:1}),s(l,{loading:e(c),disabled:e(c),variant:"danger",type:"submit"},{left:d(r=>[e(c)?j("",!0):(w(),q(t,{key:0,name:"TrashIcon",class:K(r.class)},null,8,["class"]))]),default:d(()=>[G(" "+b(v.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],40,ge)]),_:1},8,["show"])}}},$e=["onSubmit"],Be={key:0,class:"py-5"},Ve={class:"text-lg leading-6 font-medium text-gray-900"},Ce={class:"mt-2 max-w-xl text-sm text-gray-500"},he={class:"mt-5"},De={setup(_){const o=W(),i=Y(),I=X(),{t:B}=J(),S=de("utils");let c=C(!1);const a=O({name:null,logo:null,gst:"",pan:"",address:{address_street_1:"",address_street_2:"",website:"",country_id:101,state:"",city:"",phone:"",zip:""}});S.mergeSettings(a,E({},o.selectedCompany));let $=C([]),y=C(null),f=C(null);const V=C(!1);a.logo&&$.value.push({image:a.logo});const U=k(()=>({name:{required:h.withMessage(B("validation.required"),x),minLength:h.withMessage(B("validation.name_min_length"),re(3))},address:{country_id:{required:h.withMessage(B("validation.required"),x)}}})),p=H(U,k(()=>a));i.fetchCountries();function v(l,t,D,r){f.value=r.name,y.value=t}function g(){y.value=null,V.value=!0}async function F(){if(p.value.$touch(),p.value.$invalid)return!0;if(c.value=!0,(await o.updateCompany(a)).data.data){if(y.value||V.value){let t=new FormData;y.value&&t.append("company_logo",JSON.stringify({name:f.value,data:y.value})),t.append("is_company_logo_removed",V.value),await o.updateCompanyLogo(t),y.value=null,V.value=!1}c.value=!1}c.value=!1}function N(l){I.openModal({title:B("settings.clinic.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}return(l,t)=>{const D=u("BaseFileUploader"),r=u("BaseInputGroup"),z=u("BaseInputGrid"),M=u("BaseInput"),L=u("BaseMultiselect"),A=u("BaseTextarea"),Z=u("BaseIcon"),ee=u("BaseButton"),ae=u("BaseDivider"),te=u("BaseSettingCard");return w(),Q(me,null,[m("form",{onSubmit:P(F,["prevent"])},[s(te,{title:l.$t("settings.clinic.clinic"),description:l.$t("settings.clinic.section_description")},{default:d(()=>[s(z,{class:"mt-5"},{default:d(()=>[s(r,{label:l.$tc("settings.clinic.logo")},{default:d(()=>[s(D,{modelValue:e($),"onUpdate:modelValue":t[0]||(t[0]=n=>ue($)?$.value=n:$=n),base64:"",onChange:v,onRemove:g},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),s(z,{class:"mt-5"},{default:d(()=>[s(r,{label:l.$tc("settings.clinic.name"),error:e(p).name.$error&&e(p).name.$errors[0].$message,required:""},{default:d(()=>[s(M,{modelValue:e(a).name,"onUpdate:modelValue":t[1]||(t[1]=n=>e(a).name=n),invalid:e(p).name.$error,onBlur:t[2]||(t[2]=n=>e(p).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),s(r,{label:l.$tc("settings.clinic.phone")},{default:d(()=>[s(M,{modelValue:e(a).address.phone,"onUpdate:modelValue":t[3]||(t[3]=n=>e(a).address.phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),s(r,{label:l.$tc("settings.clinic.country"),error:e(p).address.country_id.$error&&e(p).address.country_id.$errors[0].$message,required:""},{default:d(()=>[s(L,{modelValue:e(a).address.country_id,"onUpdate:modelValue":t[4]||(t[4]=n=>e(a).address.country_id=n),label:"name",invalid:e(p).address.country_id.$error,options:e(i).countries,"value-prop":"id",disabled:!0,"can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),s(r,{label:l.$tc("settings.clinic.state")},{default:d(()=>[s(L,{modelValue:e(a).address.state,"onUpdate:modelValue":t[5]||(t[5]=n=>e(a).address.state=n),options:e(i).config.states,label:"name","value-prop":"name","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name","open-direction":"right"},null,8,["modelValue","options"])]),_:1},8,["label"]),s(r,{label:l.$tc("settings.clinic.city")},{default:d(()=>[s(M,{modelValue:e(a).address.city,"onUpdate:modelValue":t[6]||(t[6]=n=>e(a).address.city=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),s(r,{label:l.$tc("settings.clinic.zip")},{default:d(()=>[s(M,{modelValue:e(a).address.zip,"onUpdate:modelValue":t[7]||(t[7]=n=>e(a).address.zip=n)},null,8,["modelValue"])]),_:1},8,["label"]),m("div",null,[s(r,{label:l.$tc("settings.clinic.address")},{default:d(()=>[s(A,{modelValue:e(a).address.address_street_1,"onUpdate:modelValue":t[8]||(t[8]=n=>e(a).address.address_street_1=n),rows:"2"},null,8,["modelValue"])]),_:1},8,["label"]),s(A,{modelValue:e(a).address.address_street_2,"onUpdate:modelValue":t[9]||(t[9]=n=>e(a).address.address_street_2=n),rows:"2",row:2,class:"mt-2"},null,8,["modelValue"])])]),_:1}),s(ee,{loading:e(c),disabled:e(c),type:"submit",class:"mt-6"},{left:d(n=>[e(c)?j("",!0):(w(),q(Z,{key:0,class:K(n.class),name:"SaveIcon"},null,8,["class"]))]),default:d(()=>[G(" "+b(l.$tc("settings.clinic.save")),1)]),_:1},8,["loading","disabled"]),e(o).companies.length!==1?(w(),Q("div",Be,[s(ae,{class:"my-4"}),m("h3",Ve,b(l.$tc("settings.clinic.delete_company")),1),m("div",Ce,[m("p",null,b(l.$tc("settings.clinic.delete_company_description")),1)]),m("div",he,[m("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:N},b(l.$tc("general.delete")),1)])])):j("",!0)]),_:1},8,["title","description"])],40,$e),s(be)],64)}}};export{De as default};
