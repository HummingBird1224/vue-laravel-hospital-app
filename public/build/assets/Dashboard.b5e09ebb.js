import{D as E,_ as D,a as V}from"./EstimateIcon.f63cf095.js";import{g as C,h as A,b as B,e as v,f as x}from"./main.02f9c92c.js";import{r,o as n,l as d,w as _,h as t,f as o,g as N,t as m,ad as L,m as M,a as R,d as F,ab as $,e as w,u as a,j as S,i as p,A as P,R as O,z as U,aF as q,S as W}from"./vendor.c29fa1eb.js";import{_ as z}from"./LineChart.54af62cf.js";const H={},Y={class:"flex items-center"};function G(i,s){const e=r("BaseContentPlaceholdersText"),c=r("BaseContentPlaceholdersBox"),h=r("BaseContentPlaceholders");return n(),d(h,{rounded:!0,class:"relative flex justify-between w-full p-3 bg-white rounded shadow lg:col-span-3 xl:p-4"},{default:_(()=>[t("div",null,[o(e,{class:"h-5 -mb-1 w-14 xl:mb-6 xl:h-7",lines:1}),o(e,{class:"h-3 w-28 xl:h-4",lines:1})]),t("div",Y,[o(c,{circle:!0,class:"w-10 h-10 xl:w-12 xl:h-12"})])]),_:1})}var J=C(H,[["render",G]]);const K={},Q={class:"flex items-center"};function X(i,s){const e=r("BaseContentPlaceholdersText"),c=r("BaseContentPlaceholdersBox"),h=r("BaseContentPlaceholders");return n(),d(h,{rounded:!0,class:"relative flex justify-between w-full p-3 bg-white rounded shadow lg:col-span-2 xl:p-4"},{default:_(()=>[t("div",null,[o(e,{class:"w-12 h-5 -mb-1 xl:mb-6 xl:h-7",lines:1}),o(e,{class:"w-20 h-3 xl:h-4",lines:1})]),t("div",Q,[o(c,{circle:!0,class:"w-10 h-10 xl:w-12 xl:h-12"})])]),_:1})}var Z=C(K,[["render",X]]);const tt={class:"text-xl font-semibold leading-tight text-black xl:text-3xl"},et={class:"block mt-1 text-sm leading-tight text-gray-500 xl:text-lg"},st={class:"flex items-center"},b={props:{iconComponent:{type:Object,required:!0},loading:{type:Boolean,default:!1},route:{type:String,required:!0},label:{type:String,required:!0},large:{type:Boolean,default:!1}},setup(i){return(s,e)=>{const c=r("router-link");return i.loading?i.large?(n(),d(J,{key:1})):(n(),d(Z,{key:2})):(n(),d(c,{key:0,class:M(["relative flex justify-between p-3 bg-white rounded shadow hover:bg-gray-50 xl:p-4 lg:col-span-2",{"lg:!col-span-3":i.large}]),to:i.route},{default:_(()=>[t("div",null,[t("span",tt,[N(s.$slots,"default")]),t("span",et,m(i.label),1)]),t("div",st,[(n(),d(L(i.iconComponent),{class:"w-10 h-10 xl:w-12 xl:h-12"}))])]),_:3},8,["class","to"]))}}},I=(i=!1)=>(i?window.pinia.defineStore:F)({id:"dashboard",state:()=>({stats:{totalAmountDue:0,totalCustomerCount:0,totalInvoiceCount:0,totalEstimateCount:0},chartData:{months:[],invoiceTotals:[],expenseTotals:[],receiptTotals:[],netIncomeTotals:[]},totalSales:null,totalReceipts:null,totalExpenses:null,totalNetIncome:null,recentDueInvoices:[],recentEstimates:[],isDashboardDataLoaded:!1}),actions:{loadData(e){return new Promise((c,h)=>{R.get("/api/v1/dashboard",{params:e}).then(l=>{this.stats.totalAmountDue=l.data.total_amount_due,this.stats.totalCustomerCount=l.data.total_customer_count,this.stats.totalInvoiceCount=l.data.total_invoice_count,this.stats.totalEstimateCount=l.data.total_estimate_count,this.chartData&&l.data.chart_data&&(this.chartData.months=l.data.chart_data.months,this.chartData.invoiceTotals=l.data.chart_data.invoice_totals,this.chartData.expenseTotals=l.data.chart_data.expense_totals,this.chartData.receiptTotals=l.data.chart_data.receipt_totals,this.chartData.netIncomeTotals=l.data.chart_data.net_income_totals),this.totalSales=l.data.total_sales,this.totalReceipts=l.data.total_receipts,this.totalExpenses=l.data.total_expenses,this.totalNetIncome=l.data.total_net_income,this.recentDueInvoices=l.data.recent_due_invoices,this.recentEstimates=l.data.recent_estimates,this.isDashboardDataLoaded=!0,c(l)}).catch(l=>{A(l),h(l)})})}}})(),at={class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-9 xl:gap-8"},ot=p("56 "),lt={setup(i){$("utils");const s=I();B();const e=v();return(c,h)=>(r("BaseFormatMoney"),n(),w("div",at,[(a(e).hasAbilities(a(x).VIEW_INVOICE),n(),d(b,{key:0,"icon-component":E,loading:!a(s).isDashboardDataLoaded,route:"/admin/dashboard",large:!0,label:"Incomplete Signatures"},{default:_(()=>[S("",!0),ot]),_:1},8,["loading"])),(a(e).hasAbilities(a(x).VIEW_CUSTOMER),n(),d(b,{key:1,"icon-component":D,loading:!a(s).isDashboardDataLoaded,route:"/admin/dashboard",large:!0,label:"Un-reviewed daily reports"},{default:_(()=>[p(m(a(s).stats.totalCustomerCount),1)]),_:1},8,["loading"])),a(e).hasAbilities(a(x).VIEW_INVOICE)?(n(),d(b,{key:2,"icon-component":D,loading:!a(s).isDashboardDataLoaded,route:"/admin/invoices",label:"Assignment"},{default:_(()=>[p(m(a(s).stats.totalInvoiceCount),1)]),_:1},8,["loading"])):S("",!0),(a(e).hasAbilities(a(x).VIEW_ESTIMATE),n(),d(b,{key:3,"icon-component":V,loading:!a(s).isDashboardDataLoaded,route:"/admin/dashboard",label:"DHPPD Summary (7d)",large:!0},{default:_(()=>[p(m(a(s).stats.totalEstimateCount),1)]),_:1},8,["loading","label"]))]))}},nt={},ct={class:"grid grid-cols-1 col-span-10 px-4 py-5 lg:col-span-7 xl:col-span-8 sm:p-8"},rt={class:"flex items-center justify-between mb-2 xl:mb-4"},it={class:"grid grid-cols-3 col-span-10 text-center border-t border-l border-gray-200 border-solid lg:border-t-0 lg:text-right lg:col-span-3 xl:col-span-2 lg:grid-cols-1"},dt={class:"flex flex-col items-center justify-center p-6 lg:justify-end lg:items-end"},ht={class:"flex flex-col items-center justify-center p-6 lg:justify-end lg:items-end"},ut={class:"flex flex-col items-center justify-center p-6 lg:justify-end lg:items-end"},_t={class:"flex flex-col items-center justify-center col-span-3 p-6 border-t border-gray-200 border-solid lg:justify-end lg:items-end lg:col-span-1"};function mt(i,s){const e=r("BaseContentPlaceholdersText"),c=r("BaseContentPlaceholdersBox"),h=r("BaseContentPlaceholders");return n(),d(h,{class:"grid grid-cols-10 mt-8 bg-white rounded shadow"},{default:_(()=>[t("div",ct,[t("div",rt,[o(e,{class:"h-10 w-36",lines:1}),o(e,{class:"h-10 w-36 !mt-0",lines:1})]),o(c,{class:"h-80 xl:h-72 sm:w-full"})]),t("div",it,[t("div",dt,[o(e,{class:"h-3 w-14 xl:h-4",lines:1}),o(e,{class:"w-20 h-5 xl:h-6",lines:1})]),t("div",ht,[o(e,{class:"h-3 w-14 xl:h-4",lines:1}),o(e,{class:"w-20 h-5 xl:h-6",lines:1})]),t("div",ut,[o(e,{class:"h-3 w-14 xl:h-4",lines:1}),o(e,{class:"w-20 h-5 xl:h-6",lines:1})]),t("div",_t,[o(e,{class:"h-3 w-14 xl:h-4",lines:1}),o(e,{class:"w-20 h-5 xl:h-6",lines:1})])])]),_:1})}var xt=C(nt,[["render",mt]]);const pt={key:0,class:"grid grid-cols-10 mt-8 bg-white rounded shadow"},gt={class:"grid grid-cols-1 col-span-10 px-4 py-5 lg:col-span-7 xl:col-span-8 sm:p-6"},ft={class:"flex justify-between mt-1 mb-4 flex-col md:flex-row"},bt={class:"flex items-center sw-section-title h-10"},yt={class:"w-full my-2 md:m-0 md:w-40 h-10"},Ct={class:"grid grid-cols-3 col-span-10 text-center border-t border-l border-gray-200 border-solid lg:border-t-0 lg:text-right lg:col-span-3 xl:col-span-2 lg:grid-cols-1"},vt={class:"p-6"},wt={class:"text-xs leading-5 lg:text-sm"},Dt=t("br",null,null,-1),Bt={class:"block mt-1 text-xl font-semibold leading-8 lg:text-2xl"},$t={class:"p-6"},St={class:"text-xs leading-5 lg:text-sm"},Pt=t("br",null,null,-1),It={class:"block mt-1 text-xl font-semibold leading-8 lg:text-2xl text-green-400"},Tt={class:"p-6"},jt={class:"text-xs leading-5 lg:text-sm"},kt=t("br",null,null,-1),Et={class:"block mt-1 text-xl font-semibold leading-8 lg:text-2xl text-red-400"},Vt={class:"col-span-3 p-6 border-t border-gray-200 border-solid lg:col-span-1"},At={class:"text-xs leading-5 lg:text-sm"},Nt=t("br",null,null,-1),Lt={class:"block mt-1 text-xl font-semibold leading-8 lg:text-2xl text-primary-500"},Mt={setup(i){const s=I(),e=B();$("utils");const c=v(),h=P(["This year","Previous year"]),l=P("This year");O(l,u=>{u==="Previous year"?g({previous_year:!0}):g()},{immediate:!0});async function g(u){c.hasAbilities(x.DASHBOARD)&&await s.loadData(u)}return(u,y)=>{const T=r("BaseIcon"),j=r("BaseMultiselect"),f=r("BaseFormatMoney");return n(),w("div",null,[a(s).isDashboardDataLoaded?(n(),w("div",pt,[t("div",gt,[t("div",ft,[t("h6",bt,[o(T,{name:"ChartSquareBarIcon",class:"text-primary-400 mr-1"}),p(" "+m(u.$t("dashboard.monthly_chart.title")),1)]),t("div",yt,[o(j,{modelValue:l.value,"onUpdate:modelValue":y[0]||(y[0]=k=>l.value=k),options:h.value,"allow-empty":!1,"show-labels":!1,placeholder:u.$t("dashboard.select_year"),"can-deselect":!1},null,8,["modelValue","options","placeholder"])])]),o(z,{invoices:a(s).chartData.invoiceTotals,expenses:a(s).chartData.expenseTotals,receipts:a(s).chartData.receiptTotals,income:a(s).chartData.netIncomeTotals,labels:a(s).chartData.months,class:"sm:w-full"},null,8,["invoices","expenses","receipts","income","labels"])]),t("div",Ct,[t("div",vt,[t("span",wt,m(u.$t("dashboard.chart_info.total_sales")),1),Dt,t("span",Bt,[o(f,{amount:a(s).totalSales,currency:a(e).selectedCompanyCurrency},null,8,["amount","currency"])])]),t("div",$t,[t("span",St,m(u.$t("dashboard.chart_info.total_receipts")),1),Pt,t("span",It,[o(f,{amount:a(s).totalReceipts,currency:a(e).selectedCompanyCurrency},null,8,["amount","currency"])])]),t("div",Tt,[t("span",jt,m(u.$t("dashboard.chart_info.total_expense")),1),kt,t("span",Et,[o(f,{amount:a(s).totalExpenses,currency:a(e).selectedCompanyCurrency},null,8,["amount","currency"])])]),t("div",Vt,[t("span",At,m(u.$t("dashboard.chart_info.net_income")),1),Nt,t("span",Lt,[o(f,{amount:a(s).totalNetIncome,currency:a(e).selectedCompanyCurrency},null,8,["amount","currency"])])])])])):(n(),d(xt,{key:1}))])}}},qt={setup(i){const s=U(),e=v(),c=q();return W(()=>{s.meta.ability&&!e.hasAbilities(s.meta.ability)?c.push({name:"account.settings"}):s.meta.isOwner&&!e.currentUser.is_owner&&c.push({name:"account.settings"})}),(h,l)=>{const g=r("BasePage");return n(),d(g,null,{default:_(()=>[o(lt),o(Mt,{class:"hidden"})]),_:1})}}};export{qt as default};
