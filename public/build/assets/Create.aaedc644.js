var oe=Object.defineProperty;var N=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var D=(I,t,a)=>t in I?oe(I,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):I[t]=a,T=(I,t)=>{for(var a in t||(t={}))se.call(t,a)&&D(I,a,t[a]);if(N)for(var a of N(t))re.call(t,a)&&D(I,a,t[a]);return I};import{B as j,A as q,k as $,D as f,E as P,G as x,M as E,r as l,o as w,l as S,w as s,h as B,i as h,t as y,u as e,f as n,m as A,j as R,N as F,z as le,aF as ie,L as H,aM as ue,x as me}from"./vendor.c29fa1eb.js";import{n as X,c as J,b as ce,e as de}from"./main.02f9c92c.js";const pe={class:"flex justify-between w-full"},Ie=["onSubmit"],_e={class:"p-8 sm:p-6"},ge={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid border-modal-bg"},ve={setup(I){const t=X(),a=J(),{t:d}=j();let _=q(!1);const C=$(()=>({name:{required:f.withMessage(d("validation.required"),P),minLength:f.withMessage(d("validation.name_min_length",{count:3}),x(3))}})),c=E(C,$(()=>t.currentItemUnit));async function u(){if(c.value.$touch(),c.value.$invalid)return!0;try{const p=t.isItemUnitEdit?t.updateItemUnit:t.addItemUnit;_.value=!0,await p(t.currentItemUnit),a.refreshData&&a.refreshData(),g(),_.value=!1}catch{return _.value=!1,!0}}function g(){a.closeModal(),setTimeout(()=>{t.currentItemUnit={id:null,name:""},a.$reset(),c.value.$reset()},300)}return(p,v)=>{const M=l("BaseIcon"),i=l("BaseInput"),k=l("BaseInputGroup"),V=l("BaseButton"),z=l("BaseModal");return w(),S(z,{show:e(a).active&&e(a).componentName==="ItemUnitModal",onClose:g},{header:s(()=>[B("div",pe,[h(y(e(a).title)+" ",1),n(M,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:g})])]),default:s(()=>[B("form",{action:"",onSubmit:F(u,["prevent"])},[B("div",_e,[n(k,{label:p.$t("settings.customization.items.unit_name"),error:e(c).name.$error&&e(c).name.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[n(i,{modelValue:e(t).currentItemUnit.name,"onUpdate:modelValue":v[0]||(v[0]=o=>e(t).currentItemUnit.name=o),invalid:e(c).name.$error,type:"text",onInput:v[1]||(v[1]=o=>e(c).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),B("div",ge,[n(V,{type:"button",variant:"primary-outline",class:"mr-3 text-sm",onClick:g},{default:s(()=>[h(y(p.$t("general.cancel")),1)]),_:1}),n(V,{loading:e(_),disabled:e(_),variant:"primary",type:"submit"},{left:s(o=>[e(_)?R("",!0):(w(),S(M,{key:0,name:"SaveIcon",class:A(o.class)},null,8,["class"]))]),default:s(()=>[h(" "+y(e(t).isItemUnitEdit?p.$t("general.update"):p.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,Ie)]),_:1},8,["show"])}}},fe=["onSubmit"],he={setup(I){const t=X(),a=J();ce();const{t:d}=j(),_=le(),C=ie();de();const c=q(!1);let u=q(!1);t.$reset(),V();const g=$({get:()=>t.currentItem.price/100,set:o=>{t.currentItem.price=Math.round(o*100)}}),p=$(()=>_.name==="items.edit"),v=$(()=>p.value?d("items.edit_item"):d("items.new_item")),M=$(()=>({currentItem:{name:{required:f.withMessage(d("validation.required"),P),minLength:f.withMessage(d("validation.name_min_length",{count:3}),x(3))},hsn_sac:{maxLength:f.withMessage(d("validation.invalid_hsn",{count:8}),H(8)),numeric:f.withMessage(d("validation.numbers_only"),ue)},description:{maxLength:f.withMessage(d("validation.description_maxlength"),H(65e3))}}})),i=E(M,t);async function k(){a.openModal({title:d("settings.customization.items.add_item_unit"),componentName:"ItemUnitModal",size:"sm"})}async function V(){u.value=!0,u.value=!1}async function z(){if(i.value.currentItem.$touch(),i.value.currentItem.$invalid)return!1;c.value=!0;try{let r=T({id:_.params.id},t.currentItem);await(p.value?t.updateItem:t.addItem)(r),c.value=!1,C.push("/admin/items"),o()}catch{c.value=!1;return}function o(){a.closeModal(),setTimeout(()=>{t.resetCurrentItem(),a.$reset(),i.value.$reset()},300)}}return(o,r)=>{const U=l("BaseBreadcrumbItem"),K=l("BaseBreadcrumb"),O=l("BasePageHeader"),G=l("BaseInput"),b=l("BaseInputGroup"),Q=l("BaseMoney"),L=l("BaseIcon"),W=l("BaseSelectAction"),Y=l("BaseMultiselect"),Z=l("BaseTextarea"),ee=l("BaseButton"),te=l("BaseInputGrid"),ne=l("BaseCard"),ae=l("BasePage");return w(),S(ae,null,{default:s(()=>[n(O,{title:e(v)},{default:s(()=>[n(K,null,{default:s(()=>[n(U,{title:o.$t("general.home"),to:"dashboard"},null,8,["title"]),n(U,{title:o.$tc("items.item",2),to:"/admin/items"},null,8,["title"]),n(U,{title:e(v),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),n(ve),B("form",{class:"grid lg:grid-cols-2 mt-6",action:"submit",onSubmit:F(z,["prevent"])},[n(ne,{class:"w-full"},{default:s(()=>[n(te,{layout:"one-column"},{default:s(()=>[n(b,{label:o.$t("items.name"),"content-loading":e(u),required:"",error:e(i).currentItem.name.$error&&e(i).currentItem.name.$errors[0].$message},{default:s(()=>[n(G,{modelValue:e(t).currentItem.name,"onUpdate:modelValue":r[0]||(r[0]=m=>e(t).currentItem.name=m),"content-loading":e(u),invalid:e(i).currentItem.name.$error,onInput:r[1]||(r[1]=m=>e(i).currentItem.name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),n(b,{label:o.$t("items.hsn_sac"),"content-loading":e(u),error:e(i).currentItem.hsn_sac.$error&&e(i).currentItem.hsn_sac.$errors[0].$message},{default:s(()=>[n(G,{modelValue:e(t).currentItem.hsn_sac,"onUpdate:modelValue":r[2]||(r[2]=m=>e(t).currentItem.hsn_sac=m),"content-loading":e(u),invalid:e(i).currentItem.hsn_sac.$error,onInput:r[3]||(r[3]=m=>e(i).currentItem.hsn_sac.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),n(b,{label:o.$t("items.price"),"content-loading":e(u)},{default:s(()=>[n(Q,{modelValue:e(g),"onUpdate:modelValue":r[4]||(r[4]=m=>me(g)?g.value=m:null),"content-loading":e(u)},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),n(b,{"content-loading":e(u),label:o.$t("items.unit")},{default:s(()=>[n(Y,{modelValue:e(t).currentItem.unit_id,"onUpdate:modelValue":r[5]||(r[5]=m=>e(t).currentItem.unit_id=m),"content-loading":e(u),label:"name",options:e(t).itemUnits,"value-prop":"id","can-deselect":!1,"can-clear":!1,placeholder:o.$t("items.select_a_unit"),searchable:"","track-by":"name"},{action:s(()=>[n(W,{onClick:k},{default:s(()=>[n(L,{name:"PlusIcon",class:"h-4 mr-2 -ml-2 text-center text-primary-400"}),h(" "+y(o.$t("settings.customization.items.add_item_unit")),1)]),_:1})]),_:1},8,["modelValue","content-loading","options","placeholder"])]),_:1},8,["content-loading","label"]),n(b,{label:o.$t("items.description"),"content-loading":e(u),error:e(i).currentItem.description.$error&&e(i).currentItem.description.$errors[0].$message},{default:s(()=>[n(Z,{modelValue:e(t).currentItem.description,"onUpdate:modelValue":r[6]||(r[6]=m=>e(t).currentItem.description=m),"content-loading":e(u),name:"description",row:2,rows:"2",onInput:r[7]||(r[7]=m=>e(i).currentItem.description.$touch())},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading","error"]),B("div",null,[n(ee,{"content-loading":e(u),type:"submit",loading:c.value},{left:s(m=>[c.value?R("",!0):(w(),S(L,{key:0,name:"SaveIcon",class:A(m.class)},null,8,["class"]))]),default:s(()=>[h(" "+y(e(p)?o.$t("items.update_item"):o.$t("items.save_item")),1)]),_:1},8,["content-loading","loading"])])]),_:1})]),_:1})],40,fe)]),_:1})}}};export{he as default};
